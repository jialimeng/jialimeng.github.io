<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="[TOC] 1. Partitions OvervieweMMC 标准中，将内部的 Flash Memory 划分为 4 类区域，最多可以支持 8 个硬件分区，如下图所示：  1.1 概述一般情况下，Boot Area Partitions 和 RPMB Partition 的容量大小通常都为 4MB，部分芯片厂家也会提供配置的机会。General Purpose Partitions (GPP)">
<meta property="og:type" content="article">
<meta property="og:title" content="【转载】eMMC分区管理">
<meta property="og:url" content="http://yoursite.com/2020/12/25/Linux/Driver/storage/Flash%20Memory/mmc/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91eMMC%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="Tech Blog">
<meta property="og:description" content="[TOC] 1. Partitions OvervieweMMC 标准中，将内部的 Flash Memory 划分为 4 类区域，最多可以支持 8 个硬件分区，如下图所示：  1.1 概述一般情况下，Boot Area Partitions 和 RPMB Partition 的容量大小通常都为 4MB，部分芯片厂家也会提供配置的机会。General Purpose Partitions (GPP)">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_partitions.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/original_boot.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/alternative_boot.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/rpmb_r.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/rpmb_w.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/gpp_attributes.png">
<meta property="og:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/uda_partitions.png">
<meta property="article:published_time" content="2020-12-25T02:48:04.000Z">
<meta property="article:modified_time" content="2020-12-25T02:54:24.252Z">
<meta property="article:author" content="David Meng">
<meta property="article:tag" content="emmc">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_partitions.png">

<link rel="canonical" href="http://yoursite.com/2020/12/25/Linux/Driver/storage/Flash%20Memory/mmc/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91eMMC%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>【转载】eMMC分区管理 | Tech Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a href="https://github.com/jialimeng" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Tech Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/25/Linux/Driver/storage/Flash%20Memory/mmc/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91eMMC%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="David Meng">
      <meta itemprop="description" content="冒险，创新，永不放弃">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tech Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【转载】eMMC分区管理
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-12-25 10:48:04 / Modified: 10:54:24" itemprop="dateCreated datePublished" datetime="2020-12-25T10:48:04+08:00">2020-12-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/Driver/" itemprop="url" rel="index"><span itemprop="name">Driver</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/Driver/storage/" itemprop="url" rel="index"><span itemprop="name">storage</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/Driver/storage/Flash-Memory/" itemprop="url" rel="index"><span itemprop="name">Flash Memory</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/Driver/storage/Flash-Memory/mmc/" itemprop="url" rel="index"><span itemprop="name">mmc</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>[TOC]</p>
<h2 id="1-Partitions-Overview"><a href="#1-Partitions-Overview" class="headerlink" title="1. Partitions Overview"></a>1. Partitions Overview</h2><p>eMMC 标准中，将内部的 Flash Memory 划分为 4 类区域，最多可以支持 8 个硬件分区，如下图所示：</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_partitions.png" alt="img"></p>
<h3 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h3><p>一般情况下，Boot Area Partitions 和 RPMB Partition 的容量大小通常都为 4MB，部分芯片厂家也会提供配置的机会。General Purpose Partitions (GPP) 则在出厂时默认不被支持，即不存在这些分区，需要用户主动使能，并配置其所要使用的 GPP 的容量大小，GPP 的数量可以为 1 - 4 个，各个 GPP 的容量大小可以不一样。User Data Area (UDA) 的容量大小则为总容量大小减去其他分区所占用的容量。更多各个分区的细节将在后续小节中描述。</p>
<h3 id="1-2-分区编址"><a href="#1-2-分区编址" class="headerlink" title="1.2 分区编址"></a>1.2 分区编址</h3><p>eMMC 的每一个硬件分区的存储空间都是独立编址的，即访问地址为 0 - partition size。具体的数据读写操作实际访问哪一个硬件分区，是由 eMMC 的 Extended CSD register 的 PARTITION_CONFIG Field 中 的 Bit[2:0]: PARTITION_ACCESS 决定的，用户可以通过配置 PARTITION_ACCESS 来切换硬件分区的访问。也就是说，用户在访问特定的分区前，需要先发送命令，配置 PARTITION_ACCESS，然后再发送相关的数据访问请求。更多数据读写相关的细节，请参考 <a href="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_bus_protocol.html" target="_blank" rel="noopener">eMMC 总线协议</a> 章节。</p>
<p>eMMC 的各个硬件分区有其自身的功能特性，多分区的设计，为不同的应用场景提供了便利。</p>
<h2 id="2-Boot-Area-Partitions"><a href="#2-Boot-Area-Partitions" class="headerlink" title="2. Boot Area Partitions"></a>2. Boot Area Partitions</h2><p>Boot Area 包含两个 Boot Area Partitions，主要用于存储 Bootloader，支持 SOC 从 eMMC 启动系统。</p>
<h3 id="2-1-容量大小"><a href="#2-1-容量大小" class="headerlink" title="2.1 容量大小"></a>2.1 容量大小</h3><p>两个 Boot Area Partitions 的大小是完全一致的，由 Extended CSD register 的 BOOT_SIZE_MULT Field 决定，大小的计算公式如下：</p>
<p><strong>Size = 128Kbytes x BOOT_SIZE_MULT</strong></p>
<p>一般情况下，Boot Area Partition 的大小都为 4 MB，即 BOOT_SIZE_MULT 为 32，部分芯片厂家会提供改写 BOOT_SIZE_MULT 的功能来改变 Boot Area Partition 的容量大小。BOOT_SIZE_MULT 最大可以为 255，即 Boot Area Partition 的最大容量大小可以为 255 x 128 KB = 32640 KB = 31.875 MB。</p>
<h3 id="2-2-从-Boot-Area-启动"><a href="#2-2-从-Boot-Area-启动" class="headerlink" title="2.2 从 Boot Area 启动"></a>2.2 从 Boot Area 启动</h3><p>eMMC 中定义了 Boot State，在 Power-up、HW reset 或者 SW reset 后，如果满足一定的条件，eMMC 就会进入该 State。进入 Boot State 的条件如下：</p>
<p><strong>Original Boot Operation</strong><br>CMD 信号保持低电平不少于 74 个时钟周期，会触发 Original Boot Operation，进入 Boot State。</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/original_boot.png" alt="img"></p>
<p><strong>Alternative Boot Operation</strong><br>在 74 个时钟周期后，在 CMD 信号首次拉低或者 Host 发送 CMD1 之前，Host 发送参数为 0xFFFFFFFA 的 COM0时，会触发 Alternative Boot Operation，进入 Boot State。</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/alternative_boot.png" alt="img"></p>
<p>在 Boot State 下，如果有配置 BOOT_ACK，eMMC 会先发送 “010” 的 ACK 包，接着 eMMC 会将最大为 128Kbytes x BOOT_SIZE_MULT 的 Boot Data 发送给 Host。传输过程中，Host 可以通过拉高 CMD 信号 (Original Boot 中)，或者发送 Reset 命令 (Alternative Boot 中) 来中断 eMMC 的数据发送，完成 Boot Data 传输。</p>
<p>Boot Data 根据 Extended CSD register 的 PARTITION_CONFIG Field 的 Bit[5:3]:BOOT_PARTITION_ENABLE 的设定，可以从 Boot Area Partition 1、Boot Area Partition 2 或者 User Data Area 读出。</p>
<blockquote>
<p>Boot Data 存储在 Boot Area 比在 User Data Area 中要更加的安全，可以减少意外修改导致系统无法启动，同时无法更新系统的情况出现。</p>
</blockquote>
<p>（更多 Boot State 的细节，请参考 <a href="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_modes.html" target="_blank" rel="noopener">eMMC 工作模式</a> 的 Boot Mode 章节）</p>
<h3 id="2-3-写保护"><a href="#2-3-写保护" class="headerlink" title="2.3 写保护"></a>2.3 写保护</h3><p>通过设定 Extended CSD register 的 BOOT_WP Field，可以为两个 Boot Area Partition 独立配置写保护功能,以防止数据被意外改写或者擦出。</p>
<p>eMMC 中定义了两种 Boot Area 的写保护模式：</p>
<ol>
<li>Power-on write protection，使能后，如果 eMMC 掉电，写保护功能失效，需要每次 Power on 后进行配置</li>
<li>Permanent write protection，使能后，即使掉电也不会失效，主动进行关闭才会失效</li>
</ol>
<h2 id="3-RPMB-Partition"><a href="#3-RPMB-Partition" class="headerlink" title="3. RPMB Partition"></a>3. RPMB Partition</h2><p>RPMB（Replay Protected Memory Block）Partition 是 eMMC 中的一个具有安全特性的分区。<br>eMMC 在写入数据到 RPMB 时，会校验数据的合法性，只有指定的 Host 才能够写入，同时在读数据时，也提供了签名机制，保证 Host 读取到的数据是 RPMB 内部数据，而不是攻击者伪造的数据。</p>
<p>RPMB 在实际应用中，通常用于存储一些有防止非法篡改需求的数据，例如手机上指纹支付相关的公钥、序列号等。RPMB 可以对写入操作进行鉴权，但是读取并不需要鉴权，任何人都可以进行读取的操作，因此存储到 RPMB 的数据通常会进行加密后再存储。</p>
<h3 id="3-1-容量大小"><a href="#3-1-容量大小" class="headerlink" title="3.1 容量大小"></a>3.1 容量大小</h3><p>两个 RPMB Partition 的大小是由 Extended CSD register 的 BOOT_SIZE_MULT Field 决定，大小的计算公式如下：</p>
<p><strong>Size = 128Kbytes x BOOT_SIZE_MULT</strong></p>
<p>一般情况下，Boot Area Partition 的大小为 4 MB，即 RPMB_SIZE_MULT 为 32，部分芯片厂家会提供改写 RPMB_SIZE_MULT 的功能来改变 RPMB Partition 的容量大小。RPMB_SIZE_MULT 最大可以为 128，即 Boot Area Partition 的最大容量大小可以为 128 x 128 KB = 16384 KB = 16 MB。</p>
<h3 id="3-2-Replay-Protect-原理"><a href="#3-2-Replay-Protect-原理" class="headerlink" title="3.2 Replay Protect 原理"></a>3.2 Replay Protect 原理</h3><p>使用 eMMC 的产品，在产线生产时，会为每一个产品生产一个唯一的 256 bits 的 Secure Key，烧写到 eMMC 的 OTP 区域（只能烧写一次的区域），同时 Host 在安全区域中（例如：TEE）也会保留该 Secure Key。</p>
<p>在 eMMC 内部，还有一个RPMB Write Counter。RPMB 每进行一次合法的写入操作时，Write Counter 就会自动加一 。</p>
<p>通过 Secure Key 和 Write Counter 的应用，RMPB 可以实现数据读取和写入的 Replay Protect。</p>
<h4 id="RPMB-数据读取"><a href="#RPMB-数据读取" class="headerlink" title="RPMB 数据读取"></a>RPMB 数据读取</h4><p>RPMB 数据读取的流程如下：</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/rpmb_r.png" alt="img"></p>
<ol>
<li>Host 向 eMMC 发起读 RPMB 的请求，同时生成一个 16 bytes 的随机数，发送给 eMMC。</li>
<li>eMMC 将请求的数据从 RPMB 中读出，并使用 Secure Key 通过 HMAC SHA-256 算法，计算读取到的数据和接收到的随机数拼接到一起后的签名。然后，eMMC 将读取到的数据、接收到的随机数、计算得到的签名一并发送给 Host。</li>
<li>Host 接收到 RPMB 的数据、随机数以及签名后，首先比较随机数是否与自己发送的一致，如果一致，再用同样的 Secure Key 通过 HMAC SHA-256 算法对数据和随机数组合到一起进行签名，如果签名与 eMMC 发送的签名是一致的，那么就可以确定该数据是从 RPMB 中读取到的正确数据，而不是攻击者伪造的数据。</li>
</ol>
<p>通过上述的读取流程，可以保证 Host 正确的读取到 RPMB 的数据。</p>
<h4 id="RPMB-数据写入"><a href="#RPMB-数据写入" class="headerlink" title="RPMB 数据写入"></a>RPMB 数据写入</h4><p>RPMB 数据写入的流程如下：</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/rpmb_w.png" alt="img"></p>
<ol>
<li>Host 按照上面的读数据流程，读取 RPMB 的 Write Counter。</li>
<li>Host 将需要写入的数据和 Write Counter 拼接到一起并计算签名，然后将数据、Write Counter 以及签名一并发给 eMMC。</li>
<li>eMMC 接收到数据后，先对比 Write Counter 是否与当前的值相同，如果相同那么再对数据和 Write Counter 的组合进行签名，然后和 Host 发送过来的签名进行比较，如果签名相同则鉴权通过，将数据写入到 RPMB 中。</li>
</ol>
<p>通过上述的写入流程，可以保证 RPMB 不会被非法篡改。</p>
<p>更多 RPMB 相关的细节，可以参考 <a href="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/emmc_rpmb.html" target="_blank" rel="noopener">eMMC RPMB</a> 章节。</p>
<h2 id="4-General-Purpose-Partitions"><a href="#4-General-Purpose-Partitions" class="headerlink" title="4. General Purpose Partitions"></a>4. General Purpose Partitions</h2><p>eMMC 提供了 General Purpose Partitions (GPP)，主要用于存储系统和应用数据。在很多使用 eMMC 的产品中，GPP 都没有被启用，因为它在功能上与 UDA 类似，产品上直接使用 UDA 就可以满足需求。</p>
<h3 id="4-1-容量大小"><a href="#4-1-容量大小" class="headerlink" title="4.1 容量大小"></a>4.1 容量大小</h3><p>eMMC 最多可以支持 4 个 GPPs，每一个 GPP 的大小可以单独配置。用户可以通过设定 Extended CSD register 的以下三个 Field 来设 GPPx (x=1~4) 的容量大小：</p>
<ul>
<li>GP_SIZE_MULT_x_2</li>
<li>GP_SIZE_MULT_x_1</li>
<li>GP_SIZE_MULT_x_0</li>
</ul>
<p>GPPx 的容量计算公式如下：</p>
<p>Size = (GP_SIZE_MULT_x_2 * 2^16 + GP_SIZE_MULT_x_1 * 2^8 + GP_SIZE_MULT_x_0 * 2^0) * (Write protect group size)</p>
<p>Write protect group size = 512KB * HC_ERASE_GRP_SIZE * HC_WP_GRP_SIZE</p>
<blockquote>
<ul>
<li>eMMC 中，擦除和写保护都是按块进行的，上述表达式中的 HC_WP_GRP_SIZE 为写保护的操作块大小，HC_ERASE_GRP_SIZE 则为擦除操作的快的大小。</li>
<li>eMMC 芯片的 GPP 的配置通常是只能进行一次 (OTP)，一般会在产品量产阶段，在产线上进行。</li>
</ul>
</blockquote>
<h3 id="4-2-分区属性"><a href="#4-2-分区属性" class="headerlink" title="4.2 分区属性"></a>4.2 分区属性</h3><p>eMMC 标准中，为 GPP 定义了两类属性，Enhanced attribute 和 Extended attribute。每个 GPP 可以设定两类属性中的一种属性，不可以同时设定多个属性。</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/gpp_attributes.png" alt="img"></p>
<p><strong>Enhanced attribute</strong></p>
<ul>
<li>Default, 未设定 Enhanced attribute。</li>
<li>Enhanced storage media， 设定 GPP 为 Enhanced storage media。</li>
</ul>
<p>在 eMMC 标准中，实际上并未定义设定 Enhanced attribute 后对 eMMC 的影响。Enhanced attribute 的具体作用，由芯片制造商定义。<br>在实际的产品中，设定 Enhanced storage media 后，一般是把该分区的存储介质从 MLC 改变为 SLC，提高该分区的读写性能、寿命以及稳定性。由于 1 个存储单元下，MLC 的容量是 SLC 的两倍，所以在总的存储单元数量一定的情况下，如果把原本为 MLC 的分区改变为 SLC，会减少 eMMC 的容量，就是说，此时 eMMC 的实际总容量比标称的总容量会小一点。（MLC 和 SLC 的细节可以参考 <a href="https://linux.codingbelief.com/zh/storage/flash_memory/index.html" target="_blank" rel="noopener">Flash Memory</a> 章节内容）</p>
<p><strong>Extended attribute</strong></p>
<ul>
<li>Default, 未设定 Extended attribute。</li>
<li>System code， 设定 GPP 为 System code 属性，该属性主要用在存放操作系统类的、很少进行擦写更新的分区。</li>
<li>Non-Persistent，设定 GPP 为 Non-Persistent 属性，该属性主要用于存储临时数据的分区，例如 tmp 目录所在分区、 swap 分区等。</li>
</ul>
<p>在 eMMC 标准中，同样也没有定义设定 Extended attribute 后对 eMMC 的影响。Extended attribute 的具体作用，由芯片制造商定义。Extended attribute 主要是跟分区的应用场景有关，厂商可以为不用应用场景的分区做不同的优化处理。</p>
<h2 id="5-User-Data-Area"><a href="#5-User-Data-Area" class="headerlink" title="5. User Data Area"></a>5. User Data Area</h2><p>User Data Area (UDA) 通常是 eMMC 中最大的一个分区，是实际产品中，最主要的存储区域。</p>
<h3 id="5-1-容量大小"><a href="#5-1-容量大小" class="headerlink" title="5.1 容量大小"></a>5.1 容量大小</h3><p>UDA 的容量大小不需要设置，在配置完其他分区大小后，再扣除设置 Enhanced attribute 所损耗的容量，剩下的容量就是 UDA 的容量。</p>
<h3 id="5-2-软件分区"><a href="#5-2-软件分区" class="headerlink" title="5.2 软件分区"></a>5.2 软件分区</h3><p>为了更合理的管理数据，满足不同的应用需求，UDA 在实际产品中，会进行软件再分区。目前主流的软件分区技术有 MBR（Master Boot Record）和 GPT（GUID Partition Table）两种。这两种分区技术的基本原理类似，如下图所示：</p>
<p><img src="https://linux.codingbelief.com/zh/storage/flash_memory/emmc/uda_partitions.png" alt="img"></p>
<p>软件分区技术一般是将存储介质划分为多个区域，既 SW Partitions，然后通过一个 Partition Table 来维护这些 SW Partitions。在 Partition Table 中，每一个条目都保存着一个 SW Partition 的起始地址、大小等的属性信息。软件系统在启动后，会去扫描 Partition Table，获取存储介质上的各个 SW Partitions 信息，然后根据这些信息，将各个 Partitions 加载到系统中，进行数据存取。</p>
<blockquote>
<p>MBR 和 GPT 此处不展开详细介绍，更多的细节可以参考 wikipedia 上 <a href="https://en.wikipedia.org/wiki/Master_boot_record" target="_blank" rel="noopener">MBR</a> 和 <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table" target="_blank" rel="noopener">GPT</a> 相关介绍。</p>
</blockquote>
<h3 id="5-3-区域属性"><a href="#5-3-区域属性" class="headerlink" title="5.3 区域属性"></a>5.3 区域属性</h3><p>eMMC 标准中，支持为 UDA 中一个特定大小的区域设定 Enhanced attribute。与 GPP 中的 Enhanced attribute 相同，eMMC 标准也没有定义该区域设定 Enhanced attribute 后对 eMMC 的影响。Enhanced attribute 的具体作用，由芯片制造商定义。</p>
<p><strong>Enhanced attribute</strong></p>
<ul>
<li>Default, 未设定 Enhanced attribute。</li>
<li>Enhanced storage media， 设定该区域为 Enhanced storage media。</li>
</ul>
<p>在实际的产品中，UDA 区域设定为 Enhanced storage media 后，一般是把该区域的存储介质从 MLC 改变为 SLC。通常，产品中可以将某一个 SW Partition 设定为 Enhanced storage media，以获得更好的性能和健壮性。</p>
<h2 id="6-eMMC-分区应用实例"><a href="#6-eMMC-分区应用实例" class="headerlink" title="6. eMMC 分区应用实例"></a>6. eMMC 分区应用实例</h2><p>在一个 Android 手机系统中，各个分区的呈现形式如下：</p>
<ul>
<li>mmcblk0 为 eMMC 的块设备;</li>
<li>mmcblk0boot0 和 mmcblk0boot1 对应两个 Boot Area Partitions;</li>
<li>mmcblk0rpmb 则为 RPMB Partition，</li>
<li>mmcblk0px 为 UDA 划分出来的 SW Partitions;</li>
<li>如果存在 GPP，名称则为 mmcblk0gp1、mmcblk0gp2、mmcblk0gp3、mmcblk0gp4;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">root@xxx:&#x2F; # ls &#x2F;dev&#x2F;block&#x2F;mmcblk0*</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0boot0</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0boot1</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0rpmb</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p1</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p2</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p3</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p4</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p5</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p6</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p7</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p8</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p9</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p10</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p11</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p12</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p13</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p14</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p15</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p16</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p17</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p18</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p19</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p20</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p21</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p22</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p23</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p24</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p25</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p26</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p27</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p28</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p29</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p30</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p31</span><br><span class="line">&#x2F;dev&#x2F;block&#x2F;mmcblk0p32</span><br></pre></td></tr></table></figure>

<p>每一个分区会根据实际的功能来设定名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">root@xxx:&#x2F; # ls -l &#x2F;dev&#x2F;block&#x2F;platform&#x2F;mtk-msdc.0&#x2F;11230000.msdc0&#x2F;by-name&#x2F;</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 boot -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p22</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 cache -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p30</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 custom -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p3</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 devinfo -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p28</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 expdb -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p4</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 flashinfo -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p32</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 frp -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p5</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 keystore -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p27</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 lk -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p20</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 lk2 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p21</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 logo -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p23</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 md1arm7 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p17</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 md1dsp -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p16</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 md1img -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p15</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 md3img -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p18</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 metadata -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p8</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 nvdata -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p7</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 nvram -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p19</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 oemkeystore -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p12</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 para -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p2</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 ppl -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p6</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 proinfo -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p13</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 protect1 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p9</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 protect2 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p10</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 recovery -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p1</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 rstinfo -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p14</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 seccfg -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p11</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 secro -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p26</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 system -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p29</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 tee1 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p24</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 tee2 -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p25</span><br><span class="line">lrwxrwxrwx root root 2015-01-03 04:03 userdata -&gt; &#x2F;dev&#x2F;block&#x2F;mmcblk0p31</span><br></pre></td></tr></table></figure>

<h2 id="7-参考资料"><a href="#7-参考资料" class="headerlink" title="7. 参考资料"></a>7. 参考资料</h2><ol>
<li><a href="http://www.jedec.org/sites/default/files/docs/JESD84-B51.pdf" target="_blank" rel="noopener">Embedded Multi-Media Card (e•MMC) Electrical Standard (5.1)</a> [PDF]</li>
<li><a href="https://en.wikipedia.org/wiki/Disk_partitioning" target="_blank" rel="noopener">Disk partitioning</a> [Web]</li>
<li><a href="https://en.wikipedia.org/wiki/Master_boot_record" target="_blank" rel="noopener">Master Boot Record</a> [Web]</li>
<li><a href="https://en.wikipedia.org/wiki/GUID_Partition_Table" target="_blank" rel="noopener">GUID Partition Table</a> [Web]</li>
</ol>
<p><strong>注</strong>：本文转自蜗窝科技<a href="http://www.wowotech.net，来自【http://www.wowotech.net/basic_tech/emmc_partitions.html】" target="_blank" rel="noopener">www.wowotech.net，来自【http://www.wowotech.net/basic_tech/emmc_partitions.html】</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/emmc/" rel="tag"># emmc</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/12/25/Linux/Driver/storage/Flash%20Memory/mmc/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91eMMC%20%E7%AE%80%E4%BB%8B/" rel="prev" title="【转载】eMMC 简介">
      <i class="fa fa-chevron-left"></i> 【转载】eMMC 简介
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/12/25/Linux/Driver/storage/Flash%20Memory/mmc/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91eMMC%E6%80%BB%E7%BA%BF%E5%8D%8F%E8%AE%AE/" rel="next" title="【转载】eMMC总线协议">
      【转载】eMMC总线协议 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Partitions-Overview"><span class="nav-number">1.</span> <span class="nav-text">1. Partitions Overview</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-概述"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-分区编址"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 分区编址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Boot-Area-Partitions"><span class="nav-number">2.</span> <span class="nav-text">2. Boot Area Partitions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-容量大小"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 容量大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-从-Boot-Area-启动"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 从 Boot Area 启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-写保护"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 写保护</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-RPMB-Partition"><span class="nav-number">3.</span> <span class="nav-text">3. RPMB Partition</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-容量大小"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 容量大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Replay-Protect-原理"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 Replay Protect 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RPMB-数据读取"><span class="nav-number">3.2.1.</span> <span class="nav-text">RPMB 数据读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RPMB-数据写入"><span class="nav-number">3.2.2.</span> <span class="nav-text">RPMB 数据写入</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-General-Purpose-Partitions"><span class="nav-number">4.</span> <span class="nav-text">4. General Purpose Partitions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-容量大小"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 容量大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-分区属性"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 分区属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-User-Data-Area"><span class="nav-number">5.</span> <span class="nav-text">5. User Data Area</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-容量大小"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 容量大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-软件分区"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 软件分区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-区域属性"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 区域属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-eMMC-分区应用实例"><span class="nav-number">6.</span> <span class="nav-text">6. eMMC 分区应用实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-参考资料"><span class="nav-number">7.</span> <span class="nav-text">7. 参考资料</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="David Meng"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">David Meng</p>
  <div class="site-description" itemprop="description">冒险，创新，永不放弃</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jialimeng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jialimeng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jiali201209@163.com" title="E-Mail → mailto:jiali201209@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://ilinuxkernel.com/" title="http:&#x2F;&#x2F;ilinuxkernel.com" rel="noopener" target="_blank">Linux Kernel Exploration</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.wowotech.net/" title="http:&#x2F;&#x2F;www.wowotech.net" rel="noopener" target="_blank">蜗窝科技</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://tinylab.org/" title="http:&#x2F;&#x2F;tinylab.org" rel="noopener" target="_blank">泰晓科技</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Meng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
